# 반려견 성장 파트너 앱 설계도 (v5.2)

**최종 수정:** 2025년 8월 19일

**핵심 방향:** '재료' 기반의 스킬 '제작' 및 아이템 시스템 도입

## 1. 개요
이 문서는 '반려견 성장 파트너' 앱의 핵심 게임 루프를 **'훈련 퀘스트 -> 재료 획득 -> 스킬/아이템 제작'**이라는 '몬스터 헌터' 스타일의 제작(Crafting) 컨셉으로 재정의하는 것을 목표로 합니다.

## 2. 새로운 작동 방식 (Game Loop)
1.  **퀘스트 수주 (`TrainingPage`):** AI가 생성한 훈련 퀘스트를 '퀘스트 보드'에서 선택합니다.
2.  **훈련 및 재료 획득:** 퀘스트를 완료하고 보상으로 **'훈련 재료(Materials)'**를 얻습니다. (예: `평온의 파편`, `용기의 뼈`)
3.  **제작 (`SkillTreePage`, `CraftingPage`):** 획득한 '재료'들을 소모하여 `SkillTreePage`에서 스킬을 배우거나, 추후 구현될 `CraftingPage`에서 **'장비 아이템(Equipment)'**을 제작합니다.
4.  **성장 확인 (`DogIdCardWidget`):** 새롭게 배운 스킬과 제작/장착한 아이템을 '디지털 신분증'에서 확인합니다.

## 3. 개발 계획 (Development Plan)

### 1순위 (최우선): '재료' 기반 시스템 리팩토링
1.  **데이터 모델 재설계:**
    -   **`material_model.dart` (신규):** '재료'의 정보를 담는 `Material` 클래스를 생성합니다.
    -   **`dog_model.dart` 수정:** `inventory` 필드를 `Map<String, int>`로 변경하여, 각 재료/아이템의 '수량'을 저장합니다.
2.  **로컬 데이터베이스 분리:**
    -   `item_database.dart`는 '장비 아이템' 정보만 다루도록 유지합니다.
    -   **`material_database.dart` (신규):** 모든 '훈련 재료' 정보를 정의하는 정적 데이터 파일을 생성합니다.
3.  **핵심 로직 수정 (`DogService`):**
    -   `spendMaterialsToLearnSkill`: TP 대신 '재료'를 소모하여 스킬을 배우는 로직으로 수정합니다.
4.  **UI/UX 업데이트:**
    -   **`TrainingPage`:** 퀘스트 보상으로 '재료' 아이콘을 표시하도록 수정합니다.
    -   **`SkillTreePage`:** 스킬 학습 조건으로 필요한 '재료' 목록을 표시하도록 수정합니다.
    -   **`InventoryPage`:** '장비' 탭과 '재료' 탭을 구분하여 보여주는 UI로 개선합니다.

### 2순위: AI 훈련 퀘스트 연동
- `AIService`가 퀘스트 보상으로 `Material`의 `tag`를 반환하도록 시스템을 고도화합니다.

### 3순위 (장기 비전): '산책 챌린지' 기능 구현
- 완성된 성장 시스템을 바탕으로 최종 콘텐츠를 구현합니다.
